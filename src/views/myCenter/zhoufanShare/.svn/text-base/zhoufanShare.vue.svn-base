<template>
    <div class="slide-page" v-show="pageShow" @touchmove.prevent @click.prevent>
        <transition name="fade">
            <div class="mask" v-show="contentShow" @click="hidePage"></div>
        </transition>
        <transition name="slide" >
            <div class="warp" v-show="contentShow">
                <div class="panel">
                    <div v-for="img in imgs" :key="img.id" @click="share(img.id)"><img :src="img.img"/><p>{{img.text}}</p></div>
                </div>
                <div class="bottomBtn" @click="hidePage">
                    取消
                </div>
            </div>
        </transition>
    </div>
</template>
<style scoped lang="less" rel="stylesheet/less">
    .slide-page{
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        z-index: 999;
    }
    .mask{
        position: fixed;
        height: 100%;
        width: 100%;
        background: rgba(0, 0, 0, 1);
        opacity: .5;
    }
    .warp{
        position: fixed;
        bottom:0;
        left: 0;
        height:4.88rem;
        width:100%;
        background: #fff;
        .panel{
            height:4rem;
            width:100%;
            background: #f4f4f4;
            padding-top: .1rem;
            >div{
                float: left;
                width: 25%;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                img{
                    width: 60%;
                    padding: 20% 20% 0 20%;
                    height:auto;
                }
                p{
                    line-height: .4rem;
                    font-size: .22rem;
                    text-align: center;
                }
            }
        }
        >.bottomBtn{
            position: absolute;
            left: 0;
            bottom: 0;
            width:100%;
            height:.8rem;
            text-align: center;
            font-size: .26rem;
            line-height:.86rem;
            /*display: flex;*/
            /*justify-content: center;*/
            /*align-items:center;*/
        }
    }
    .fade-enter-active, .fade-leave-active {
        transition: opacity .5s
    }
    .fade-enter, .fade-leave-active {
        opacity: 0
    }

    .slide-enter-active {
        transition: all .3s ease-in-out;
    }
    .slide-enter{
        transform: translateY(4.88em);
        opacity: 0;
    }
    .slide-leave-active {
        transition: all .3s ease-in-out;
        transform: translateY(4.88rem);
        opacity: 0;
    }
</style>

<script type="text/ecmascript-6">
    import wx from 'weixin-js-sdk';
    export default{
        data(){
            return{
                imgs:[
//                    {img:require('./facebook@2x.png'),text:'facebook'},
//                    {img:require('./twiter@2x.png'),text:'twiter'},
                    {img:require('./weixin@2x.png'),text:'微信',id:1},
                    {img:require('./qq@2x.png'),text:'QQ好友',id:2},
                    {img:require('./pengyouquan@2x.png'),text:'朋友圈',id:3},
                    {img:require('./place@2x.png'),text:'QQ空间',id:4},

                ],
                pageShow: false,
                contentShow: false,
            }
        },
        created () {

        },
        mounted () {
//            wx.config({
//                debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
//                appId: 'wxde73550d41923678', // 必填，公众号的唯一标识
//                timestamp: "1414587457", // 必填，生成签名的时间戳
//                nonceStr: 'Wm3WZYTPz0wzccnW', // 必填，生成签名的随机串
//                signature: '0f9de62fce790f9a083d5c99e95740ceb90c27ed',// 必填，签名，见附录1
//                jsApiList: ['onMenuShareTimeline'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
//            });
        },
        methods:{
            showPage: function(){
                this.pageShow = true;
                this.contentShow = true;
                this.$root.$children[0].$refs.footer.show = false
            },
            hidePage: function(){
                this.contentShow = false;
                this.$root.$children[0].$refs.footer.show = true;
                setTimeout(()=>{
                    this.pageShow = false;
                }, 300)
            },
            share (type) {
                alert(type)
                if (type === 1){
                    wx.onMenuShareTimeline({
                        title: '111', // 分享标题
                        link: 'http://www.baidu.com', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                        imgUrl: require('./weixin@2x.png'), // 分享图标
                        success: function () {
                            // 用户确认分享后执行的回调函数
                            alert("22")
                        },
                        cancel: function () {
                            // 用户取消分享后执行的回调函数
                            alert("33")
                        }
                    });
                }
            }
        }
    }
</script>
